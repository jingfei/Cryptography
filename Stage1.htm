<!DOCTYPE html>
<html>
<head>
	<script src="jquery.min.js"></script>
	<script type="text/javascript" src="jquery.idTabs.min.js"></script>
	<link rel="stylesheet" type="text/css" href="main.css"/>
	<title>Cryptography</title>
</head>
<body>
<div id="Left">
	<ul class="idTabs">
		<li><a href="#Alphabet">Alphabet</a></li>
		<li><a href="#Others">Others</a></li>
	</ul>
	<div id="Alphabet">
		<input type="radio" name="Choice_Alp" id="Auto" value="Auto" checked="checked"/>Auto
		<input type="radio" name="Choice_Alp" id="Manual" value="Manual"/>Manual
		<br/>
		<table id="ID_Alp"></table>
	</div>
	<div id="Others">
		<table id="ID_Other"></table>
	</div>
</div>
<div id="Main">
	<h1>Make your Own Code</h1>
	<textarea id="Input" placeholder="Put your text here"></textarea>
	<br/>
	<button id="Button" onClick="Convert();">convert</button>
	<br/>
	<textarea id="Output" placeholder="This is result" readonly></textarea>
</div>
<div id="footer">
	Designed by JingFei
</div>

</body>
</html>
<script>
$(document).ready(function(){
	$('#ID_Alp').html(ForAuto(1));
	$('#ID_Other').html(ForManual(3));
});

$('input[name=Choice_Alp]:radio').change(
	function(){
		if($('input[name=Choice_Alp]:checked').val()=="Auto")
			$('#ID_Alp').html(ForAuto(1));
		else if($('input[name=Choice_Alp]:checked').val()=="Manual")
			$('#ID_Alp').html(ForManual(1));
	}
);

String.prototype.replaceAt = function(index, character){
	return this.substr(0, index) +character+ this.substr(index+character.length);
}

function Convert(){
	var $Text = $('#Input').val();
	var $Ans = $Text;
	if(!$Text) return;
	/* change all input to lower-alpha */
	$Text = $Text.toLowerCase();
	$('#Input').val($Text);
	/***********************************/
	for($i=33; $i<127; $i++){
		var $Before = String.fromCharCode($i);
		var $After = $('#a'+$i+' option:selected').text();
		if(!$After){
			$After = $('#t'+$i).html();
			if(!$After)
				$After = $('#AutoSelection option:selected').text();
		}
		if($Before=="(" || $Before==")" || $Before=="[" || $Before=="{" || $Before=="*" || $Before=="+" || $Before=="." || $Before=="$" || $Before=="^" || $Before=="\\" || $Before=="|" || $Before=="?")
			$Before = "\\" + $Before;
		$n = $Text.search($Before);
		while($n!=-1){
			$Ans = $Ans.replaceAt($n,$After);
			$Text = $Text.replaceAt($n," ");
			$n = $Text.search($Before);
		}
	}
//	alert($Text);
	$('#Output').val($Ans);
}

function AutoChanged(){
	var Name = parseInt($('#AutoSelection').val());
	var Start1 = 97;
	var Start2 = 65;
	for($i=Name+1, $j=1; $j<26; ++$i, ++$j){
		if($i==26) $i=0;
		CharNum = (Start1+$j).toString();
		$('#t'+ CharNum ).html(String.fromCharCode(Start2+$i));
	}
}

function ForAuto(Choice){
	var Inner="";
	var Start1, Start2;
	switch(Choice){
		case 1: Start1=97; Start2=65; break;
		default: Start1=33; Start2=33;
	}
	for($i=0; $i<26; ++$i){
		CharCode1 = String.fromCharCode(Start1+$i);
		CharCode2 = String.fromCharCode(Start2+$i);
		CharNum = (Start1+$i).toString();
		Inner += "<tr><td>"+ CharCode1 +"</td>";
		Inner += "<td><img src='arrow.svg'/></td>";
		/*add selection on 'A'*/
		if($i==0){
			if(Choice == 1)
				Inner += "<td><select id='AutoSelection' onchange='AutoChanged();'>";
			for($j=0; $j<26; ++$j)
				Inner += "<option value='"+$j+"'>"+String.fromCharCode(Start2+$j)+"</option>";
			Inner += "</select></td>";
		}
		/*********************/
		else{
			Inner +="<td id='t"+ CharNum +"'>"+ CharCode2 +"</td>";
		}
		Inner += "</tr>";
	}
	return Inner;
}

function ForManual(Choice){
	var Inner = "";
	var ar1, ar2;
	switch(Choice){
		case 1:
			ar1 = new Array(26);  
			ar2 = new Array(26);
			for($k=65, $i=97, $j=0; $j<26; ++$k, ++$i, ++$j){
				ar1[$j]=$i;
				ar2[$j]=$k;
			}
			break;
		default: 
			ar1 = new Array(26);  
			ar2 = new Array(26);
			for($i=33, $j=0; $j<42; ++$i, ++$j){
				if($i==65) $i=91;
				else if($i==97) $i=123;
				ar1[$j]=ar2[$j]=$i;
			}
	}
	var Length = ar1.length;
	for($i=0; $i<Length; ++$i){
		CharCode = String.fromCharCode(ar1[$i]);
		CharNum = ar1[$i].toString();
		Inner += "<tr>";
		Inner += "<td>"+ CharCode +"</td>";
		Inner += "<td><img src='arrow.svg'/></td>";
		Inner += "<td><select id = 'a"+ CharNum +"'>";
		for($k=0; $k<Length; ++$k){
			Inner += "<option ";
			if($k===$i)
				Inner += "selected='selected' ";
			Inner += "value='"+$k+"'>"+String.fromCharCode(ar2[$k])+"</option>";
		}
		Inner += "</select></td>";
		Inner += "</tr>";
	}
	return Inner;
}

</script>
<style>
html, body{
	background-color: #4FB99F;
	width: 100%;
	height: 100%;
	overflow: hidden;
}

#ID_Alp, #ID_Other{
	margin: 0 auto;
	text-align: center;
	width: 100%;
	height: 100%;
}

#ID_Alp td, #ID_Other td{
	width: 33%;
	height: 25px;
}

#Left {
	width: 20%;
	height: 99%;
	position: absolute;
	text-align: center;
	font-size: 20px;
	color: #112F41;
	background-color: #4FB99F;
	top: 0px;
	left: 0px;
	overflow-y: scroll;
}

#Main{
	width: 80%;
	height: 95%;
	float: right;
	text-align: center;
}

#Main img{
	height: 100%;
}

#Main h1{
	margin: 20px;
	text-shadow:4px 4px 3px #ED553B;
}

#Main textarea{
	width: 80%;
	height: 35%;
	background-color: #F2B134;
	font-size: 18px;
}

#footer{
 position: fixed; 
 bottom:2px; 
 right:5px; 
 color:#112F41;
}

#Button {
	position: relative;
    color: rgba(255,255,255,1);
    text-decoration: none;
    background-color: rgba(219,87,5,1);
    font-family: 'Yanone Kaffeesatz';
    font-weight: 700;
    font-size: 2em;
    padding: 4px;
    -webkit-border-radius: 8px;
    -moz-border-radius: 8px;
    border-radius: 8px;
    -webkit-box-shadow: 0px 9px 0px rgba(219,31,5,1), 0px 9px 25px rgba(0,0,0,.7);
    -moz-box-shadow: 0px 9px 0px rgba(219,31,5,1), 0px 9px 25px rgba(0,0,0,.7);
    box-shadow: 0px 9px 0px rgba(219,31,5,1), 0px 9px 25px rgba(0,0,0,.7);
    margin: 10px 0 30px 0;
	width: 160px;
	text-align: center;
	
	-webkit-transition: all .1s ease;
	-moz-transition: all .1s ease;
	-ms-transition: all .1s ease;
	-o-transition: all .1s ease;
	transition: all .1s ease;
}

#Button:active {
    -webkit-box-shadow: 0px 3px 0px rgba(219,31,5,1), 0px 3px 6px rgba(0,0,0,.9);
    -moz-box-shadow: 0px 3px 0px rgba(219,31,5,1), 0px 3px 6px rgba(0,0,0,.9);
    box-shadow: 0px 3px 0px rgba(219,31,5,1), 0px 3px 6px rgba(0,0,0,.9);
    position: relative;
    top: 6px;
}

</style>
